name: .NET Core

on: [push]

jobs:
  build:

    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v1
    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 2.2.108

    - name: Test Powershell1
      run: |
        $name = "Alan"
        $dir = (Get-Location).path
        Write-Host "Hello $world"
        Write-host "Current directory :$dir"
        get-childitem | % { write-host $_.name }
    - name: Test Powershell2
      run: |
        Write-Host "Lets see if posh vars remain between run steps? dir=$dir"

    - name: restore
      run: | 
        dotnet restore 

    - name: build
      run: dotnet build --configuration Release

    - name: test
      run: dotnet test
